!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["svg-slimming"]=n():e["svg-slimming"]=n()}(global,function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,t),s.l=!0,s.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)t.d(o,s,function(n){return e[n]}.bind(null,s));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=22)}({22:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(3);n.NodeType=o.NodeType;var s=t(23);n.parse=s.Parser},23:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t(3),s=t(24),i=t(25);n.REG_XML_DECL=i.REG_XML_DECL,n.REG_CDATA_SECT=i.REG_CDATA_SECT,n.REG_OTHER_SECT=i.REG_OTHER_SECT,n.REG_DOCTYPE=i.REG_DOCTYPE,n.REG_OTHER_DECL=i.REG_OTHER_DECL,n.REG_COMMENTS=i.REG_COMMENTS,n.REG_START_TAG=i.REG_START_TAG,n.REG_END_TAG=i.REG_END_TAG,n.REG_ATTR=i.REG_ATTR;const r=t(26),d=t(6),l=[[1,"xml-decl",i.REG_XML_DECL,o.NodeType.XMLDecl],[1,"cdata",i.REG_CDATA_SECT,o.NodeType.CDATA],[2,i.REG_OTHER_SECT,o.NodeType.OtherSect],[1,"doctype",i.REG_DOCTYPE,o.NodeType.DocType],[2,i.REG_OTHER_DECL,o.NodeType.OtherDecl],[1,"comments",i.REG_COMMENTS,o.NodeType.Comments]],c=(e,n,t)=>{for(;t.lastpos<e;t.lastpos++)"\r"===n[t.lastpos]||"\n"===n[t.lastpos]?"\r"!==n[t.lastpos]&&"\r"===n[t.lastpos-1]||(t.line++,t.pos=0):t.pos++},u=(e,n)=>{const t=e[2].exec(n);return t?{node:new s.Node({nodeType:e[3],nodeName:`#${e[1]}`,textContent:t[1]}),str:n.slice(t[0].length)}:null},p=(e,n)=>{const t=e[1].exec(n);return t?{node:new s.Node({nodeType:e[2],nodeName:`#${t[1].toLowerCase()}`,textContent:t[2]}),str:n.slice(t[0].length)}:null},a=(e,n)=>{const t=e.indexOf("<");if(0===t){for(const n of l)if(1===n[0]){const t=u(n,e);if(t)return t}else{const t=p(n,e);if(t)return t}const t=((e,n)=>{const t=i.REG_START_TAG.exec(e);if(t){const d={line:n.line,pos:n.pos,lastpos:0},l={node:new s.Node({nodeType:o.NodeType.Tag,nodeName:t[1],namespace:"",selfClose:"/"===t[3]}),str:e.slice(t[0].length)};if(-1!==t[1].indexOf(":")){const e=t[1].split(":");if(!e[1])throw new Error(`错误的开始标签！ 在第 ${n.line} 行第 ${n.pos} 位`);l.node.nodeName=e[1],e[0]&&(l.node.namespace=e[0])}c(t[1].length+1,t[0],d),i.REG_ATTR.lastIndex=0;let u=i.REG_ATTR.exec(t[2]);const p={};for(;u;){if(c(u.index+t[1].length+1,t[0],d),p[u[1]])throw new Error(`属性名重复！ 在第 ${d.line} 行第 ${d.pos} 位`);if(p[u[1]]=!0,-1!==u[1].indexOf(":")){const e=u[1].split(":");if(!e[1])throw new Error(`错误的属性名！ 在第 ${d.line+n.line-1} 行第 ${d.line>1?d.pos:n.pos+d.pos} 位`);l.node.setAttribute(e[1],r.collapseQuot(u[2]).trim(),e[0])}else l.node.setAttribute(u[1],r.collapseQuot(u[2]).trim());u=i.REG_ATTR.exec(t[2])}return l}return null})(e,n);if(t)return t;const d=((e,n)=>{const t=i.REG_END_TAG.exec(e);if(t){const i={node:new s.Node({nodeType:o.NodeType.EndTag,nodeName:t[1],namespace:""}),str:e.slice(t[0].length)};if(-1!==t[1].indexOf(":")){const e=t[1].split(":");if(!e[1])throw new Error(`错误的结束标签！ 在第 ${n.line} 行第 ${n.pos} 位`);i.node.nodeName=e[1],e[0]&&(i.node.namespace=e[0])}return i}return null})(e,n);if(d)return d;throw new Error(`解析标签失败！ 在第 ${n.line} 行第 ${n.pos} 位`)}return{node:new s.Node({nodeType:o.NodeType.Text,nodeName:"#text",textContent:d.mixWhiteSpace(e.slice(0,t))}),str:-1===t?"":e.slice(t)}};n.Parser=function(e){return new Promise((n,t)=>{const i=new s.Node({nodeType:o.NodeType.Document,nodeName:"#document"}),r=[],d={line:1,pos:0,lastpos:0};let l,u=!1;const p=e.indexOf("<");p>0&&e.slice(0,p).replace(/\s+/,"")&&t(new Error(`意外的文本节点！ 在第 ${d.line} 行第 ${d.pos} 位`));try{l=a(e.slice(p),d)}catch(e){return void t(e)}for(l.node.nodeType===o.NodeType.XMLDecl&&p>0&&t(new Error(`xml声明必须在文档最前面！ 在第 ${d.line} 行第 ${d.pos} 位`)),i.appendChild(l.node),l.node.nodeType===o.NodeType.Tag&&(u=!0,l.node.selfClose||r.push(l.node));l.str;){c(e.indexOf(l.str),e,d);try{l=a(l.str,d)}catch(e){return void t(e)}const n=r.length;l.node.nodeType===o.NodeType.EndTag?n?r[n-1].nodeName===l.node.nodeName&&r[n-1].namespace===l.node.namespace?(r[n-1].childNodes.length||(r[n-1].selfClose=!0),r.pop()):t(new Error(`开始和结束标签无法匹配！ 在第 ${d.line} 行第 ${d.pos} 位`)):t(new Error(`意外的结束标签！ 在第 ${d.line} 行第 ${d.pos} 位`)):(n?r[n-1].appendChild(l.node):l.node.nodeType===o.NodeType.Text||l.node.nodeType===o.NodeType.CDATA?l.node.textContent.replace(/\s/g,"")&&t(new Error(`意外的文本节点！ 在第 ${d.line} 行第 ${d.pos} 位`)):i.appendChild(l.node),l.node.nodeType===o.NodeType.Tag&&(n||(u&&t(new Error(`只允许出现一个根元素节点！ 在第 ${d.line} 行第 ${d.pos} 位`)),u=!0),l.node.selfClose||r.push(l.node))),l.str||c(e.length,e,d)}r.length&&t(new Error(`文档结构错误！ 在第 ${d.line} 行第 ${d.pos} 位`)),u||t(new Error(`没有根元素节点！ 在第 ${d.line} 行第 ${d.pos} 位`)),n(i)})}},24:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t(3);class s{constructor(e){this.nodeName=e.nodeName,this.nodeType=e.nodeType,this.namespace=e.namespace,this.selfClose=e.selfClose,this.textContent=e.textContent,this.nodeType!==o.NodeType.Tag&&this.nodeType!==o.NodeType.Document||(this._attributes=[],this._childNodes=[])}get attributes(){return this._attributes?Object.freeze(this._attributes.slice()):null}get childNodes(){return this._childNodes?Object.freeze(this._childNodes.slice()):null}cloneNode(){const e=new s({nodeName:this.nodeName,nodeType:this.nodeType,namespace:this.namespace,textContent:this.textContent});return this._attributes&&(e._attributes=this._attributes.map(e=>({name:e.name,value:e.value,fullname:e.fullname,namespace:e.namespace}))),e}appendChild(e){if(this._childNodes){if(e.parentNode&&e.parentNode!==this){-1!==e.parentNode.childNodes.indexOf(e)&&e.parentNode.removeChild(e)}const n=this._childNodes.indexOf(e);-1!==n&&this._childNodes.splice(n,1),this._childNodes.push(e),e.parentNode=this}}insertBefore(e,n){if(this._childNodes){if(-1!==this._childNodes.indexOf(n)){const n=this._childNodes.indexOf(e);-1!==n&&this._childNodes.splice(n,1),e.parentNode=null}}}replaceChild(e,...n){if(this._childNodes){const t=this._childNodes.indexOf(e);-1!==t&&(this._childNodes.splice(t,1,...n),e.parentNode=null,n.forEach(e=>{e.parentNode=this}))}}removeChild(e){if(this._childNodes){const n=this._childNodes.indexOf(e);-1!==n&&(this._childNodes.splice(n,1),e.parentNode=null)}}hasAttribute(e,n){if(this._attributes)for(const t of this._attributes)if(!n&&t.fullname===e||t.name===e&&t.namespace===n)return!0;return!1}getAttribute(e,n){if(this._attributes)for(const t of this._attributes)if(!n&&t.fullname===e||t.name===e&&t.namespace===n)return t.value;return null}setAttribute(e,n,t){if(this._attributes){for(const o of this._attributes)if(!t&&o.fullname===e||o.name===e&&o.namespace===t)return void(o.value=n);const o={name:e,value:n,fullname:e};t&&(o.fullname=`${t}:${e}`,o.namespace=t),this._attributes.push(o)}}removeAttribute(e,n){if(this._attributes)for(let t=this._attributes.length;t--;){const o=this._attributes[t];if(!n&&o.fullname===e||o.name===e&&o.namespace===n){this._attributes.splice(t,1);break}}}}n.Node=s},25:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});let o=!0;try{o=/\u{20BB7}/u.test("𠮷")}catch(e){o=!1}const s=`:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD${o?"\\u{10000}-\\u{EFFFF}":""}`,i=`[${s}][${`${s}\\-\\.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040`}]*`,r="\\s*=\\s*",d="[A-Za-z](?:[A-Za-z0-9\\._]|-)*",l=`\\s+version${r}(?:'1\\.[0-9]+'|"1\\.[0-9]+")`,c=`\\s+encoding${r}(?:'${d}'|"${d}")`,u=`\\s+standalone${r}(?:'(?:yes|no)'|"(?:yes|no)")`,p=`(?:&${i};|&#[0-9]+;|&#x[0-9a-fA-F]+;)`,a=`"(?:[^<&"]|${p})*"|'(?:[^<&']|${p})*'`,f="(?:[^<>]+|[^<>]*'[^']*'[^<>]*|[^<>]*\"[^\"]*\"[^<>]*|[^<>]*<[^<>]*>[^<>]*)+?";n.REG_XML_DECL=new RegExp(`^<\\?xml(${l}(?:${c})?(?:${u})?\\s*)\\?>`),n.REG_CDATA_SECT=/^<!\[CDATA\[([\d\D]*?)\]\]>/,n.REG_OTHER_SECT=/^<!\[\s?([A-Z]+)\s?\[([\d\D]*?)\]\]>/,n.REG_DOCTYPE=new RegExp(`^<!DOCTYPE\\s+(${f})>`),n.REG_OTHER_DECL=new RegExp(`^<!([A-Z]+)\\s+(${f})>`),n.REG_COMMENTS=/^<!--([\d\D]*?)-->/,n.REG_START_TAG=new RegExp(`^<(${i})((?:\\s+${i}${r}(?:${a}))*)\\s*(\\/?)>`,o?"u":""),n.REG_END_TAG=new RegExp(`^</(${i})\\s*>`,o?"u":""),n.REG_ATTR=new RegExp(`(${i})${r}(${a})`,o?"gu":"g")},26:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.collapseQuot=(e=>e.slice(1,-1))},3:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.EndTag=-1]="EndTag",e[e.Tag=1]="Tag",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.OtherSect=5]="OtherSect",e[e.OtherDecl=6]="OtherDecl",e[e.XMLDecl=7]="XMLDecl",e[e.Comments=8]="Comments",e[e.Document=9]="Document",e[e.DocType=10]="DocType"}(n.NodeType||(n.NodeType={}))},6:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mixWhiteSpace=(e=>e.replace(/\s+/g," "))}})});