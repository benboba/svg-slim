!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["svg-slimming"]=n():e["svg-slimming"]=n()}(global,function(){return function(e){var n={};function o(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=n,o.d=function(e,n,r){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(r,i,function(n){return e[n]}.bind(null,i));return r},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=24)}({24:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(5);n.NodeType=r.NodeType;var i=o(25);n.parse=i.Parser},25:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=o(5),i=o(26),p=o(27);n.REG_XML_DECL=p.REG_XML_DECL,n.REG_CDATA_SECT=p.REG_CDATA_SECT,n.REG_OTHER_SECT=p.REG_OTHER_SECT,n.REG_DOCTYPE=p.REG_DOCTYPE,n.REG_OTHER_DECL=p.REG_OTHER_DECL,n.REG_COMMENTS=p.REG_COMMENTS,n.REG_START_TAG=p.REG_START_TAG,n.REG_END_TAG=p.REG_END_TAG,n.REG_ATTR=p.REG_ATTR;const l=o(28),u=o(9),T=[[1,"xml-decl",p.REG_XML_DECL,r.NodeType.XMLDecl],[1,"cdata",p.REG_CDATA_SECT,r.NodeType.CDATA],[2,p.REG_OTHER_SECT,r.NodeType.OtherSect],[1,"doctype",p.REG_DOCTYPE,r.NodeType.DocType],[2,p.REG_OTHER_DECL,r.NodeType.OtherDecl],[1,"comments",p.REG_COMMENTS,r.NodeType.Comments]],f=(e,n,o)=>{for(;o.lastpos<e;o.lastpos++)"\r"===n[o.lastpos]||"\n"===n[o.lastpos]?"\r"!==n[o.lastpos]&&"\r"===n[o.lastpos-1]||(o.line++,o.pos=0):o.pos++},t=(e,n)=>{const o=e[2].exec(n);return o?{node:new i.Node({nodeType:e[3],nodeName:`#${e[1]}`,textContent:o[1]}),str:n.slice(o[0].length)}:null},_=(e,n)=>{const o=e[1].exec(n);return o?{node:new i.Node({nodeType:e[2],nodeName:`#${o[1].toLowerCase()}`,textContent:o[2]}),str:n.slice(o[0].length)}:null},E=(e,n)=>{const o=e.indexOf("<");if(0===o){for(const n of T)if(1===n[0]){const o=t(n,e);if(o)return o}else{const o=_(n,e);if(o)return o}const o=((e,n)=>{const o=p.REG_START_TAG.exec(e);if(o){const u={line:n.line,pos:n.pos,lastpos:0},T={node:new i.Node({nodeType:r.NodeType.Tag,nodeName:o[1],namespace:"",selfClose:"/"===o[3]}),str:e.slice(o[0].length)};if(o[1].includes(":")){const e=o[1].split(":");if(!e[1])throw new Error(`错误的开始标签！ 在第 ${n.line} 行第 ${n.pos} 位`);T.node.nodeName=e[1],e[0]&&(T.node.namespace=e[0])}f(o[1].length+1,o[0],u),p.REG_ATTR.lastIndex=0;let t=p.REG_ATTR.exec(o[2]);const _={};for(;t;){if(f(t.index+o[1].length+1,o[0],u),_[t[1]])throw new Error(`属性名重复！ 在第 ${u.line} 行第 ${u.pos} 位`);if(_[t[1]]=!0,t[1].includes(":")){const e=t[1].split(":");if(!e[1])throw new Error(`错误的属性名！ 在第 ${u.line+n.line-1} 行第 ${u.line>1?u.pos:n.pos+u.pos} 位`);T.node.setAttribute(e[1],l.collapseQuot(t[2]).trim(),e[0])}else T.node.setAttribute(t[1],l.collapseQuot(t[2]).trim());t=p.REG_ATTR.exec(o[2])}return T}return null})(e,n);if(o)return o;const u=((e,n)=>{const o=p.REG_END_TAG.exec(e);if(o){const p={node:new i.Node({nodeType:r.NodeType.EndTag,nodeName:o[1],namespace:""}),str:e.slice(o[0].length)};if(o[1].includes(":")){const e=o[1].split(":");if(!e[1])throw new Error(`错误的结束标签！ 在第 ${n.line} 行第 ${n.pos} 位`);p.node.nodeName=e[1],e[0]&&(p.node.namespace=e[0])}return p}return null})(e,n);if(u)return u;throw new Error(`解析标签失败！ 在第 ${n.line} 行第 ${n.pos} 位`)}return{node:new i.Node({nodeType:r.NodeType.Text,nodeName:"#text",textContent:u.mixWhiteSpace(e.slice(0,o))}),str:-1===o?"":e.slice(o)}};n.Parser=(async e=>new Promise((n,o)=>{const p=new i.Node({nodeType:r.NodeType.Document,nodeName:"#document"}),l=[],u={line:1,pos:0,lastpos:0};let T,t=!1;const _=e.indexOf("<");_>0&&e.slice(0,_).replace(/\s+/,"")&&o(new Error(`意外的文本节点！ 在第 ${u.line} 行第 ${u.pos} 位`));try{T=E(e.slice(_),u)}catch(e){return void o(e)}for(T.node.nodeType===r.NodeType.XMLDecl&&_>0&&o(new Error(`xml声明必须在文档最前面！ 在第 ${u.line} 行第 ${u.pos} 位`)),p.appendChild(T.node),T.node.nodeType===r.NodeType.Tag&&(t=!0,T.node.selfClose||l.push(T.node));T.str;){f(e.indexOf(T.str),e,u);try{T=E(T.str,u)}catch(e){return void o(e)}const n=l.length;if(T.node.nodeType===r.NodeType.EndTag)if(n)if(l[n-1].nodeName===T.node.nodeName&&l[n-1].namespace===T.node.namespace){const e=l[n-1].childNodes;e&&e.length||(l[n-1].selfClose=!0),l.pop()}else o(new Error(`开始和结束标签无法匹配！ 在第 ${u.line} 行第 ${u.pos} 位`));else o(new Error(`意外的结束标签！ 在第 ${u.line} 行第 ${u.pos} 位`));else n?l[n-1].appendChild(T.node):T.node.nodeType===r.NodeType.Text||T.node.nodeType===r.NodeType.CDATA?T.node.textContent.replace(/\s/g,"")&&o(new Error(`意外的文本节点！ 在第 ${u.line} 行第 ${u.pos} 位`)):p.appendChild(T.node),T.node.nodeType===r.NodeType.Tag&&(n||(t&&o(new Error(`只允许出现一个根元素节点！ 在第 ${u.line} 行第 ${u.pos} 位`)),t=!0),T.node.selfClose||l.push(T.node));T.str||f(e.length,e,u)}l.length&&o(new Error(`文档结构错误！ 在第 ${u.line} 行第 ${u.pos} 位`)),t||o(new Error(`没有根元素节点！ 在第 ${u.line} 行第 ${u.pos} 位`)),n(p)}))},26:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const r=o(5);class i{constructor(e){this.nodeName=e.nodeName,this.nodeType=e.nodeType,this.namespace=e.namespace,this.selfClose=e.selfClose,this.textContent=e.textContent,this.nodeType!==r.NodeType.Tag&&this.nodeType!==r.NodeType.Document||(this._attributes=[],this._childNodes=[])}get attributes(){return this._attributes?Object.freeze(this._attributes.slice()):null}get childNodes(){return this._childNodes?Object.freeze(this._childNodes.slice()):null}cloneNode(){const e=new i({nodeName:this.nodeName,nodeType:this.nodeType,namespace:this.namespace,textContent:this.textContent});return this._attributes&&(e._attributes=this._attributes.map(e=>({name:e.name,value:e.value,fullname:e.fullname,namespace:e.namespace}))),e}appendChild(e){if(this._childNodes){if(e.parentNode&&e.parentNode!==this){-1!==e.parentNode.childNodes.indexOf(e)&&e.parentNode.removeChild(e)}const n=this._childNodes.indexOf(e);-1!==n&&this._childNodes.splice(n,1),this._childNodes.push(e),e.parentNode=this}}insertBefore(e,n){if(this._childNodes){if(-1!==this._childNodes.indexOf(n)){const n=this._childNodes.indexOf(e);-1!==n&&this._childNodes.splice(n,1),delete e.parentNode}}}replaceChild(e,...n){if(this._childNodes){const o=this._childNodes.indexOf(e);-1!==o&&(this._childNodes.splice(o,1,...n),delete e.parentNode,n.forEach(e=>{e.parentNode=this}))}}removeChild(e){if(this._childNodes){const n=this._childNodes.indexOf(e);-1!==n&&(this._childNodes.splice(n,1),delete e.parentNode)}}hasAttribute(e,n){if(this._attributes)for(const o of this._attributes)if(!n&&o.fullname===e||o.name===e&&o.namespace===n)return!0;return!1}getAttribute(e,n){if(this._attributes)for(const o of this._attributes)if(!n&&o.fullname===e||o.name===e&&o.namespace===n)return o.value;return null}setAttribute(e,n,o){if(this._attributes){for(const r of this._attributes)if(!o&&r.fullname===e||r.name===e&&r.namespace===o)return void(r.value=n);const r={name:e,value:n,fullname:e};o&&(r.fullname=`${o}:${e}`,r.namespace=o),this._attributes.push(r)}}removeAttribute(e,n){if(this._attributes)for(let o=this._attributes.length;o--;){const r=this._attributes[o];if(!n&&r.fullname===e||r.name===e&&r.namespace===n){this._attributes.splice(o,1);break}}}}n.Node=i},27:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});let r=!0;try{r=/\u{20BB7}/u.test("𠮷")}catch(e){r=!1}const i=`:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD${r?"\\u{10000}-\\u{EFFFF}":""}`,p=`[${i}][${`${i}\\-\\.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040`}]*`,l="\\s*=\\s*",u="[A-Za-z](?:[A-Za-z0-9\\._]|-)*",T=`\\s+version${l}(?:'1\\.[0-9]+'|"1\\.[0-9]+")`,f=`\\s+encoding${l}(?:'${u}'|"${u}")`,t=`\\s+standalone${l}(?:'(?:yes|no)'|"(?:yes|no)")`,_=`(?:&${p};|&#[0-9]+;|&#x[0-9a-fA-F]+;)`,E=`"(?:[^<&"]|${_})*"|'(?:[^<&']|${_})*'`,y="(?:[^<>'\"]+|[^<>']*'[^']*'[^<>']*|[^<>\"]*\"[^\"]*\"[^<>\"]*|[^<>'\"]*<[^<>]*>[^<>'\"]*)+?";n.REG_XML_DECL=new RegExp(`^<\\?xml(${T}(?:${f})?(?:${t})?\\s*)\\?>`),n.REG_CDATA_SECT=/^<!\[CDATA\[([\d\D]*?)\]\]>/,n.REG_OTHER_SECT=/^<!\[\s?([A-Z]+)\s?\[([\d\D]*?)\]\]>/,n.REG_DOCTYPE=new RegExp(`^<!DOCTYPE\\s+(${y})>`),n.REG_OTHER_DECL=new RegExp(`^<!([A-Z]+)\\s+(${y})>`),n.REG_COMMENTS=/^<!--([\d\D]*?)-->/,n.REG_START_TAG=new RegExp(`^<(${p})((?:\\s+${p}${l}(?:${E}))*)\\s*(\\/?)>`,r?"u":""),n.REG_END_TAG=new RegExp(`^</(${p})\\s*>`,r?"u":""),n.REG_ATTR=new RegExp(`(${p})${l}(${E})`,r?"gu":"g")},28:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.collapseQuot=(e=>e.slice(1,-1))},5:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.EndTag=-1]="EndTag",e[e.Tag=1]="Tag",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.OtherSect=5]="OtherSect",e[e.OtherDecl=6]="OtherDecl",e[e.XMLDecl=7]="XMLDecl",e[e.Comments=8]="Comments",e[e.Document=9]="Document",e[e.DocType=10]="DocType"}(n.NodeType||(n.NodeType={}))},9:function(e,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mixWhiteSpace=(e=>e.replace(/\s+/g," "))}})});