!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["svg-slimming"]=t():e["svg-slimming"]=t()}(global,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.EndTag=-1]="EndTag",e[e.Tag=1]="Tag",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.OtherSect=5]="OtherSect",e[e.OtherDecl=6]="OtherDecl",e[e.XMLDecl=7]="XMLDecl",e[e.Comments=8]="Comments",e[e.Document=9]="Document",e[e.DocType=10]="DocType"}(t.NodeType||(t.NodeType={}))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixWhiteSpace=(e=>e.replace(/\s+/g," "))},,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.NodeType=o.NodeType;var s=n(21);t.parse=s.Parser},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),s=n(22),r=n(23);t.REG_XML_DECL=r.REG_XML_DECL,t.REG_CDATA_SECT=r.REG_CDATA_SECT,t.REG_OTHER_SECT=r.REG_OTHER_SECT,t.REG_DOCTYPE=r.REG_DOCTYPE,t.REG_OTHER_DECL=r.REG_OTHER_DECL,t.REG_COMMENTS=r.REG_COMMENTS,t.REG_START_TAG=r.REG_START_TAG,t.REG_END_TAG=r.REG_END_TAG,t.REG_ATTR=r.REG_ATTR;const i=n(24),d=n(5),l=[[1,"xml-decl",r.REG_XML_DECL,o.NodeType.XMLDecl],[1,"cdata",r.REG_CDATA_SECT,o.NodeType.CDATA],[2,r.REG_OTHER_SECT,o.NodeType.OtherSect],[1,"doctype",r.REG_DOCTYPE,o.NodeType.DocType],[2,r.REG_OTHER_DECL,o.NodeType.OtherDecl],[1,"comments",r.REG_COMMENTS,o.NodeType.Comments]],c=(e,t,n)=>{for(;n.lastpos<e;n.lastpos++)"\r"===t[n.lastpos]||"\n"===t[n.lastpos]?"\r"!==t[n.lastpos]&&"\r"===t[n.lastpos-1]||(n.line++,n.pos=0):n.pos++},u=(e,t)=>{const n=e[2];if(n.test(t)){const o=n.exec(t);return{node:new s.Node({nodeType:e[3],nodeName:`#${e[1]}`,textContent:o[1]}),str:t.slice(o[0].length)}}return null},a=(e,t)=>{const n=e[1];if(n.test(t)){const o=n.exec(t);return{node:new s.Node({nodeType:e[2],nodeName:`#${o[1].toLowerCase()}`,textContent:o[2]}),str:t.slice(o[0].length)}}return null},p=(e,t)=>{const n=e.indexOf("<");if(0===n){for(const t of l)if(1===t[0]){const n=u(t,e);if(n)return n}else{const n=a(t,e);if(n)return n}const n=((e,t)=>{if(r.REG_START_TAG.test(e)){const n={line:t.line,pos:t.pos,lastpos:0},d=r.REG_START_TAG.exec(e),l={node:new s.Node({nodeType:o.NodeType.Tag,nodeName:d[1],namespace:"",selfClose:"/"===d[3]}),str:e.slice(d[0].length)};if(-1!==d[1].indexOf(":")){const e=d[1].split(":");if(!e[1])throw new Error(`错误的开始标签！ 在第 ${t.line} 行第 ${t.pos} 位`);l.node.nodeName=e[1],e[0]&&(l.node.namespace=e[0])}c(d[1].length+1,d[0],n),r.REG_ATTR.lastIndex=0;let u=r.REG_ATTR.exec(d[2]);const a={};for(;u;){if(c(u.index+d[1].length+1,d[0],n),a[u[1]])throw new Error(`属性名重复！ 在第 ${n.line} 行第 ${n.pos} 位`);if(a[u[1]]=!0,-1!==u[1].indexOf(":")){const e=u[1].split(":");if(!e[1])throw new Error(`错误的属性名！ 在第 ${n.line+t.line-1} 行第 ${n.line>1?n.pos:t.pos+n.pos} 位`);l.node.setAttribute(e[1],i.collapseQuot(u[2]).trim(),e[0])}else l.node.setAttribute(u[1],i.collapseQuot(u[2]).trim());u=r.REG_ATTR.exec(d[2])}return l}return null})(e,t);if(n)return n;const d=((e,t)=>{if(r.REG_END_TAG.test(e)){const n=r.REG_END_TAG.exec(e),i={node:new s.Node({nodeType:o.NodeType.EndTag,nodeName:n[1],namespace:""}),str:e.slice(n[0].length)};if(-1!==n[1].indexOf(":")){const e=n[1].split(":");if(!e[1])throw new Error(`错误的结束标签！ 在第 ${t.line} 行第 ${t.pos} 位`);i.node.nodeName=e[1],e[0]&&(i.node.namespace=e[0])}return i}return null})(e,t);if(d)return d;throw new Error(`解析标签失败！ 在第 ${t.line} 行第 ${t.pos} 位`)}return{node:new s.Node({nodeType:o.NodeType.Text,nodeName:"#text",textContent:d.mixWhiteSpace(e.slice(0,n))}),str:-1===n?"":e.slice(n)}};t.Parser=function(e){return new Promise((t,n)=>{const r=new s.Node({nodeType:o.NodeType.Document,nodeName:"#document"}),i=[],d={line:1,pos:0,lastpos:0};let l,u=!1;const a=e.indexOf("<");a>0&&e.slice(0,a).replace(/\s+/,"")&&n(new Error(`意外的文本节点！ 在第 ${d.line} 行第 ${d.pos} 位`));try{l=p(e.slice(a),d)}catch(e){n(e)}for(l.node.nodeType===o.NodeType.XMLDecl&&a>0&&n(new Error(`xml声明必须在文档最前面！ 在第 ${d.line} 行第 ${d.pos} 位`)),r.appendChild(l.node),l.node.nodeType===o.NodeType.Tag&&(u=!0,l.node.selfClose||i.push(l.node));l.str;){c(e.indexOf(l.str),e,d);try{l=p(l.str,d)}catch(e){n(e);break}const t=i.length;l.node.nodeType===o.NodeType.EndTag?t?i[t-1].nodeName===l.node.nodeName&&i[t-1].namespace===l.node.namespace?(i[t-1].childNodes.length||(i[t-1].selfClose=!0),i.pop()):n(new Error(`开始和结束标签无法匹配！ 在第 ${d.line} 行第 ${d.pos} 位`)):n(new Error(`意外的结束标签！ 在第 ${d.line} 行第 ${d.pos} 位`)):(t?i[t-1].appendChild(l.node):l.node.nodeType===o.NodeType.Text||l.node.nodeType===o.NodeType.CDATA?l.node.textContent.replace(/\s/g,"")&&n(new Error(`意外的文本节点！ 在第 ${d.line} 行第 ${d.pos} 位`)):r.appendChild(l.node),l.node.nodeType===o.NodeType.Tag&&(t||(u&&n(new Error(`只允许出现一个根元素节点！ 在第 ${d.line} 行第 ${d.pos} 位`)),u=!0),l.node.selfClose||i.push(l.node))),l.str||c(e.length,e,d)}i.length&&n(new Error(`文档结构错误！ 在第 ${d.line} 行第 ${d.pos} 位`)),u||n(new Error(`没有根元素节点！ 在第 ${d.line} 行第 ${d.pos} 位`)),t(r)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3);class s{constructor(e){this.nodeName=e.nodeName,this.nodeType=e.nodeType,this.namespace=e.namespace,this.selfClose=e.selfClose,this.textContent=e.textContent,this.nodeType!==o.NodeType.Tag&&this.nodeType!==o.NodeType.Document||(this._attributes=[],this._childNodes=[])}get attributes(){return this._attributes?Object.freeze(this._attributes.slice()):null}get childNodes(){return this._childNodes?Object.freeze(this._childNodes.slice()):null}cloneNode(){const e=new s({nodeName:this.nodeName,nodeType:this.nodeType,namespace:this.namespace,textContent:this.textContent});return this._attributes&&(e._attributes=this._attributes.map(e=>({name:e.name,value:e.value,fullname:e.fullname,namespace:e.namespace}))),e}appendChild(e){if(this._childNodes){if(e.parentNode&&e.parentNode!==this){-1!==e.parentNode.childNodes.indexOf(e)&&e.parentNode.removeChild(e)}const t=this._childNodes.indexOf(e);-1!==t&&this._childNodes.splice(t,1),this._childNodes.push(e),e.parentNode=this}}insertBefore(e,t){if(this._childNodes){if(-1!==this._childNodes.indexOf(t)){const t=this._childNodes.indexOf(e);-1!==t&&this._childNodes.splice(t,1),e.parentNode=null}}}replaceChild(e,...t){if(this._childNodes){const n=this._childNodes.indexOf(e);-1!==n&&(this._childNodes.splice(n,1,...t),e.parentNode=null,t.forEach(e=>{e.parentNode=this}))}}removeChild(e){if(this._childNodes){const t=this._childNodes.indexOf(e);-1!==t&&(this._childNodes.splice(t,1),e.parentNode=null)}}hasAttribute(e,t){if(this._attributes)for(const n of this._attributes)if(!t&&n.fullname===e||n.name===e&&n.namespace===t)return!0;return!1}getAttribute(e,t){if(this._attributes)for(const n of this._attributes)if(!t&&n.fullname===e||n.name===e&&n.namespace===t)return n.value;return null}setAttribute(e,t,n){if(this._attributes){for(const o of this._attributes)if(!n&&o.fullname===e||o.name===e&&o.namespace===n)return void(o.value=t);const o={name:e,value:t,fullname:e};n&&(o.fullname=`${n}:${e}`,o.namespace=n),this._attributes.push(o)}}removeAttribute(e,t){if(this._attributes)for(let n=this._attributes.length;n--;){const o=this._attributes[n];if(!t&&o.fullname===e||o.name===e&&o.namespace===t){this._attributes.splice(n,1);break}}}}t.Node=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let o=!0;try{o=/\u{20BB7}/u.test("𠮷")}catch(e){o=!1}const s=`:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD${o?"\\u{10000}-\\u{EFFFF}":""}`,r=`[${s}][${`${s}\\-\\.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040`}]*`,i="\\s*=\\s*",d="[A-Za-z](?:[A-Za-z0-9\\._]|-)*",l=`\\s+version${i}(?:'1\\.[0-9]+'|"1\\.[0-9]+")`,c=`\\s+encoding${i}(?:'${d}'|"${d}")`,u=`\\s+standalone${i}(?:'(?:yes|no)'|"(?:yes|no)")`,a=`(?:&${r};|&#[0-9]+;|&#x[0-9a-fA-F]+;)`,p=`"(?:[^<&"]|${a})*"|'(?:[^<&']|${a})*'`,f="(?:[^<>]+|[^<>]*'[^']*'[^<>]*|[^<>]*\"[^\"]*\"[^<>]*|[^<>]*<[^<>]*>[^<>]*)+?";t.REG_XML_DECL=new RegExp(`^<\\?xml(${l}(?:${c})?(?:${u})?\\s*)\\?>`),t.REG_CDATA_SECT=/^<!\[CDATA\[([\d\D]*?)\]\]>/,t.REG_OTHER_SECT=/^<!\[\s?([A-Z]+)\s?\[([\d\D]*?)\]\]>/,t.REG_DOCTYPE=new RegExp(`^<!DOCTYPE\\s+(${f})>`),t.REG_OTHER_DECL=new RegExp(`^<!([A-Z]+)\\s+(${f})>`),t.REG_COMMENTS=/^<!--([\d\D]*?)-->/,t.REG_START_TAG=new RegExp(`^<(${r})((?:\\s+${r}${i}(?:${p}))*)\\s*(\\/?)>`,o?"u":""),t.REG_END_TAG=new RegExp(`^</(${r})\\s*>`,o?"u":""),t.REG_ATTR=new RegExp(`(${r})${i}(${p})`,o?"gu":"g")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collapseQuot=(e=>e.slice(1,-1))}])});